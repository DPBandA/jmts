<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"> 

    <h:panelGrid id="jobGrouping" columns="2" >


        <h:outputText value="Sector:" style="font-weight: bold" />        
        <p:selectOneMenu value="#{jobManager.currentJob.sector}"
                         converter="sectorConverter"
                         var="sect" >

            <p:ajax listener="#{jobManager.updateSector}"                    
                    global="false"                                       
                    process="@this" />
            <f:selectItems  value="#{jobManager.activeSectors}"
                            var="sector"
                            itemValue="#{sector}"
                            itemLabel="#{sector.name}"/>

            <p:column>
                #{sect.name}
            </p:column>
        </p:selectOneMenu>

        <h:outputText value="Category:" style="font-weight: bold" />        
        <p:selectOneMenu  id="category"
                          value="#{jobManager.currentJob.jobCategory}"
                          converter="jobCategoryConverter"
                          var="jobCat" >
            <p:ajax listener="#{jobManager.updateJobCategory}"
                    global="false"
                    
                    process="@this" />
            <f:selectItems  value="#{jobManager.activeJobCategories}"
                            var="jobCategory"
                            itemValue="#{jobCategory}"
                            itemLabel="#{jobCategory.name}"/>
            
             <p:column>
                #{jobCat.name}
            </p:column>
        </p:selectOneMenu>

        <h:outputText value="Subcategory:" style="font-weight: bold" />
        <p:selectOneMenu  id="subCategory"
                          converter="jobSubCategoryConverter"
                          var="jobSubCat"
                          value="#{jobManager.currentJob.jobSubCategory}">
            
            <p:ajax listener="#{jobManager.updateJobSubCategory}"
                    global="false"
                    
                    process="@this" />
            <f:selectItems  value="#{jobManager.activeJobSubCategories}"
                            var="jobSubCategory"
                            itemValue="#{jobSubCategory}"
                            itemLabel="#{jobSubCategory.name}"/>
            
             <p:column>
                #{jobSubCat.name}
            </p:column>
        </p:selectOneMenu>
    </h:panelGrid>          
</html>
